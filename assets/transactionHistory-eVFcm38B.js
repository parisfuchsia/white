import{r as i,a as k,u as m,j as e,b as E,c as C,d as A,e as I,g as M,h as z,f as O,N as D}from"./index-D2KmRjDY.js";import{C as W}from"./react-apexcharts.min-CVa8gtJ6.js";import{G as $}from"./index-GlpO5-qB.js";import{m as u}from"./proxy-lNFMB2EF.js";import{A as B}from"./index-Dk3ny8HH.js";function G({onClose:g}){const f=["Food","Travel","Groceries","Salary","Others"],[a,y]=i.useState({}),[o,c]=i.useState({type:"Income",tags:[]}),r=k();m(s=>s.transac);const n=s=>{let l={...o};if(y({...a,[s]:!a[s]}),l.tags.includes(s)){const j=l.tags.indexOf(s);l.tags.splice(j,1)}else l.tags.push(s);c(l)},h=async s=>{s==="filter"?await r(E({type:o.type,tags:o.tags})):await r(C()),g()};return e.jsxs(u.div,{onClick:g,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-[#00000090]  flex-col inset-0 fixed flex items-center justify-center",children:[e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s=>s.stopPropagation(),className:"bg-neutral-50 dark:bg-gray-800 z-20 flex w-11/12 sm:w-8/12  flex-col gap-4 p-8 shadow-md rounded-lg justify-center items-start",children:[e.jsx("p",{className:"w-full text-center text-gray-600 dark:text-gray-300  text-xs",children:"Filter "}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("label",{className:"text-xs text-gray-600 dark:text-gray-300 ",children:"Type"}),e.jsxs("select",{onChange:s=>c(l=>({...l,type:s.target.value})),className:"p-2 bg-neutral-50 dark:bg-gray-800 ",children:[e.jsx("option",{value:"Income",children:"Income"}),e.jsx("option",{value:"Savings",children:"Savings"}),e.jsx("option",{value:"Expenses",children:"Expenses"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("label",{className:"text-xs text-gray-600 dark:text-gray-300 flex items-center gap-1",children:[e.jsx($,{}),"Tags"]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2 ",children:f.map(s=>e.jsx("div",{onClick:()=>n(s),className:`outline  py-1 px-2 rounded text-gray-800 text-center ${a[s]?"bg-teal-100 outline-teal-200":"bg-white outline-teal-100"} `,children:s},s))})]}),e.jsxs("div",{className:"flex gap-1 ",children:[e.jsx("button",{className:"btn bg-neutral-50 dark:bg-gray-900",onClick:h,children:"Show All"}),e.jsx("button",{onClick:()=>h("filter"),className:"btn bg-neutral-50 dark:bg-gray-900",children:"Filter"})]})]}),e.jsx("p",{className:"text-neutral-100 text-xs my-4 sm:text-sm",children:"Click anywhere outside to close."})]})}function K({parent:g,child:f}){var v,N;const[a,y]=i.useState("All"),[o,c]=i.useState(!1),r=m(t=>t.transac.filteredTransactions.length>0&&t.transac.isFilterOn?t.transac.filteredTransactions:t.transac.isFilterOn?[]:t.transac.transactions),{barChartDetails:n}=m(t=>t.transac),{transactions:h}=m(t=>t.transac),{theme:s}=m(t=>t.theme),l=i.useMemo(()=>s==="light"?"#000000":"#FFFFFF",[s]),j={chart:{type:"bar",toolbar:{show:!1}},labels:["Income","Savings","Expenses"],plotOptions:{bar:{horizontal:!0,columnWidth:"90%",distributed:!0}},dataLabels:{enabled:!0,style:{colors:["#000000"],fontSize:"16px"}},yaxis:{labels:{style:{colors:l}}},xaxis:{labels:{style:{colors:l}}},legend:{position:"bottom",labels:{colors:l}},colors:["#DBEAFE","#99F6E4","#FFB6C1"]},d=k();i.useEffect(()=>{a==="All"?d(A()):a==="Today"?d(I()):a==="This Month"?d(M()):a==="This Week"&&d(z())},[a,h]),i.useEffect(()=>{o?document.body.style.overflow="hidden":document.body.style.overflow=""},[o]);const b=t=>{if((n==null?void 0:n.length)>0)return n.reduce((x,p)=>p.type===t?parseFloat(p.amount)+x:x,0)},F=i.useMemo(()=>b("Income"),[n]),w=i.useMemo(()=>b("Expenses"),[n]),T=i.useMemo(()=>b("Savings"),[n]);i.useEffect(()=>{d(O())},[]);const S=[{name:"Amount",data:[F||0,T||0,w||0]}];return e.jsxs("div",{className:"w-full",children:[e.jsx(u.div,{className:"flex w-full flex-col items-center my-2",children:e.jsxs("div",{className:"w-full dark:bg-gray-900 dark:text-neutral-100 bg-neutral-50 shadow-md flex rounded-lg flex-col items-center justify-center p-5",children:[e.jsx(B,{children:o&&e.jsx("div",{className:"z-40",children:e.jsx(G,{onClose:()=>c(!1)})})}),e.jsx(W,{type:"bar",height:200,width:"350",options:j,series:S}),e.jsx("div",{className:"w-full gap-2 flex justify-start items-center my-2",children:e.jsxs("select",{value:a,onChange:t=>y(t.target.value),className:"bg-neutral-50 dark:bg-gray-900 p-1 dark:text-neutral-100 act  text-xs",children:[e.jsx("option",{value:"All",children:"All"}),e.jsx("option",{value:"Today",children:"Today"}),e.jsx("option",{value:"This Week",children:"This week"}),e.jsx("option",{value:"This Month",children:"This month"})]})})]})}),e.jsxs("p",{className:"w-full flex gap-5 items-center text-gray-600 dark:text-gray-300  text-xs justify-center ",children:["Transactions      ",e.jsx("button",{onClick:()=>c(!0),className:"text-xs truncate btn bg-neutral-50 dark:bg-gray-900 text-gray-800 dark:text-neutral-100",children:"Filter"})]}),e.jsx(u.div,{variants:g,initial:"hidden",animate:"visible",exit:"hidden",className:"flex flex-col gap-2 mt-2 mb-5",children:(r==null?void 0:r.length)>0?(N=(v=r==null?void 0:r.slice())==null?void 0:v.reverse())==null?void 0:N.map(t=>{var x;return e.jsx(u.div,{variants:f,whileTap:{opacity:"30%"},className:"bg-neutral-50 dark:bg-gray-900 dark:text-neutral-100 py-3 px-6 rounded-lg shadow-md",children:e.jsxs(D,{to:`/transaction/detail/${t==null?void 0:t.id}`,className:" flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("p",{className:"text-xl leading-tight tracking-tight font-bold",children:["$",t==null?void 0:t.amount]}),e.jsx("p",{className:"text-md ",children:t==null?void 0:t.type}),e.jsx("div",{className:"truncate flex gap-1",children:((x=t==null?void 0:t.tags)==null?void 0:x.length)>0?t.tags.map(p=>e.jsx("p",{className:"underline text-xs",children:p})):e.jsx("p",{className:"text-xs text-gray-500",children:"No tag provided"})}),e.jsxs("p",{className:" flex gap-3 text-xs text-gray-600 dark:text-gray-400",children:["Date: ",t==null?void 0:t.date,e.jsxs("span",{children:[" Time: ",t==null?void 0:t.time," "]})]})]}),e.jsx("div",{children:e.jsx("div",{className:`size-6 rounded-tl-xl rounded-br-xl flex items-center justify-center ${(t==null?void 0:t.type)==="Income"?"bg-[#00FFFF]":(t==null?void 0:t.type)==="Savings"?"bg-[#7FFFD4]":"bg-[#DE3163]"}`,children:e.jsx("div",{className:"size-4 rounded-tl-lg rounded-br-lg flex items-center justify-center bg-white ",children:e.jsx("div",{className:"size-2 bg-gray-800 rounded-full"})})})})]})},t==null?void 0:t.id)}):e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300 w-full text-center",children:"No transactions recorded"})})]})}export{K as default};
